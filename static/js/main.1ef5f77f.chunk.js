(this["webpackJsonpreact-hw-6"]=this["webpackJsonpreact-hw-6"]||[]).push([[0],{11:function(e,a,t){},12:function(e,a,t){},14:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(5),l=t.n(o),c=(t(11),t(1)),i=(t(12),"http://shop-roles.asmer.fs.a-level.com.ua/graphql"),s="http://shop-roles.asmer.fs.a-level.com.ua/",u=t(2);function m(e){var a=r.a.useState(""),t=Object(c.a)(a,2),n=t[0],o=t[1],l=r.a.useState(""),s=Object(c.a)(l,2),m=s[0],p=s[1],d=r.a.useState(null),g=Object(c.a)(d,2),h=g[0],E=g[1];return r.a.createElement("div",{className:"login"},r.a.createElement("header",{className:"login__header"},h?r.a.createElement("span",null,h):r.a.createElement("span",null,"Please, login")),r.a.createElement("div",{className:"login__input-box"},r.a.createElement("input",{name:"login",type:"text",onChange:function(e){o(e.target.value)}})),r.a.createElement("div",{className:"login__input-box"},r.a.createElement("input",{name:"password",type:"password",onChange:function(e){p(e.target.value)}})),r.a.createElement("div",{className:"login__input-box"},r.a.createElement("div",{className:"login__btn",onClick:function(){Object(u.request)(i,"query log($l:String, $p:String){\n      login(login:$l, password:$p)\n    }",{l:n,p:m}).then((function(a){a.login?(localStorage.auth=a.login,e.logIn()):E("Wrong Login or Password")}))}},"Log In")))}function p(e){var a=r.a.useState([]),t=Object(c.a)(a,2),n=t[0],o=t[1];return r.a.useEffect((function(){new u.GraphQLClient(i,{headers:{Authorization:"Bearer ".concat(localStorage.auth)}}).request('query {\n          GoodFind(query:"[{}]"){\n                _id\n                name\n                description\n                price\n                images {url}\n              }\n            }').then((function(e){o(e.GoodFind)}))}),[]),r.a.createElement("div",{className:"product"},n.length>0?n.map((function(e){return r.a.createElement("div",{key:e._id,className:"product__item"},r.a.createElement("div",{className:"product__title"},e.name+" "),r.a.createElement("span",{className:"product__price"},"$",e.price),r.a.createElement("div",{className:"product__desc"},e.description),r.a.createElement("img",{src:e.images?s+e.images[0].url:"./default_product.jpg",className:"product__img"}))})):"loading...")}var d=function(){var e=r.a.useState(!1),a=Object(c.a)(e,2),t=a[0],n=a[1];return r.a.createElement("main",{className:"wrapper"},r.a.createElement("header",{className:"header"}," Wellcome to ",r.a.createElement("b",null,"My Shop")," "),t?r.a.createElement(p,null):r.a.createElement(m,{logIn:function(){n(!0)}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(d,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},6:function(e,a,t){e.exports=t(14)}},[[6,1,2]]]);
//# sourceMappingURL=main.1ef5f77f.chunk.js.map